<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>The CZSrna's Tower Defence ‚Äì Alpha 0.0.9</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/versions.css" />
  <link rel="stylesheet" href="css/music.css" />
  <link rel="stylesheet" href="css/helpers.css" />
  <link rel="stylesheet" href="css/ui.css" />
  <link rel="stylesheet" href="css/settings.css" />
</head>
<body id="gameContainer">
  <h1 class="title">The CZSrna's Tower Defence</h1>
  <h3 class="subtitle-bottom-left">Alpha 0.0.9</h3>

  <!-- Start overlay -->
  <div id="startOverlay" class="overlay-center">
    <div style="display:flex; flex-direction:column; gap:12px; align-items:center;">
      <button id="startButton" class="btn big">Start Game</button>
    
      <!--  Version button -->
      <button class="versionButton btn">Version History</button>

      <!-- Settings Button -->
      <button id="openSettingsBtn" class="btn">Game settings‚öôÔ∏è</button>

      <h2 class="title">Select map</h2>
      <!-- Styled select on its own row -->
      <select id="mapSelect" class="styled-select">
        <option value="./games/00X_test.json">Test Map</option>
        <option value="./games/001_basicGame.json">Basic</option>
        <option value="./games/002_zigZagGame.json">Zig-Zag</option>
        <option value="./games/003_longMapGame.json">Long Map</option>
        <option value="./games/004_adventureMap.json">Adventure Map</option>
        <option value="./games/005_abilityMap.json">Lava Map</option>
      </select>
      <div id="mapInfo" class="mapInfo">
        <h3>Basic game</h3>
        <p><b>Description:</b> Very basic map to laern game mechanics</p>
        <p><b>Level count:</b> 8</p>
        <p><b>Difficulty:</b> ‚≠ê</p>
        <p><b>Tower Types:</b> 4</p>
        <p><b>Abilities:</b> -</p>
        <div id="minimapContainer">
          <div id="minimap" style="grid-template-rows: repeat(7, 10px); grid-template-columns: repeat(10, 10px);">
            <div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile path"></div><div class="minimap-tile path"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile path"></div><div class="minimap-tile path"></div><div class="minimap-tile path"></div><div class="minimap-tile path"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile path"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile path"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile path"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile path"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile path"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile path"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile path"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile path"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile path"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile path"></div><div class="minimap-tile path"></div><div class="minimap-tile path"></div><div class="minimap-tile path"></div><div class="minimap-tile path"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile path"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile block"></div><div class="minimap-tile path"></div><div class="minimap-tile path"></div></div>
          </div>
      </div>
      <!-- ‚öôÔ∏è Settings Popup -->
      <div id="settingsPopup" class="settings-popup hidden">
        <div class="settings-content">
          <h2 class="cl-primary">Game Settings</h2>
        
          <label>
            <input type="checkbox" id="showFpsCheckbox">
            Show FPS
          </label>
        
          <div class="fps-setting d-none">
            <label for="fpsRange">Target FPS:</label>
            <input type="range" id="fpsRange" min="30" max="144" step="1">
            <input type="number" id="fpsNumber" min="30" max="300" step="1">
          </div>
        
          <div class="settings-buttons">
            <button id="saveSettingsBtn" class="btn">Save</button>
            <button id="closeSettingsBtn" class="btn">Close</button>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- Main container -->
  <div id="mainContainer" style="display:flex; gap:12px; margin-top:12px; justify-content:center; align-items:flex-start;">
    
    <!-- Left: Game Log -->
    <!-- Info section -->
    <div id="eventsBox">
        <h3 class="subtitle">Alpha 0.0.9</h3>
        <div id="infoBox" class="box">
          <h3>Controls</h3>
          <div>P - Pause game</div>
          <div>Wheel (Press) - Move around the map</div>
          <div>Wheel - Zoom in / Zoom out</div>
          <div>Select the tower from cards</div>
          <div>Left click - Build Tower</div>
          <div>Right click - Sell Tower</div>
        </div>

        <!-- Music Player -->
        <div id="musicBox" class="box">
          <h3>Music Player</h3>
                
          <!-- Track controls -->
          <div class="music-controls">
            <button id="musicPrev" class="btn-music">&lt;&lt;</button>
            <span id="musicTitle" class="music-title">No track loaded</span>
            <button id="musicNext" class="btn-music">&gt;&gt;</button>
          </div>
        
          <!-- Progress bar -->
          <div class="music-progress">
            <div id="musicProgressBarContainer" class="progress-container">
              <div id="musicProgressBar" class="progress-bar"></div>
            </div>
            <div id="musicTime">00:00 / 00:00</div>
          </div>
        
          <!-- Volume & toggle -->
          <div class="music-volume">
            <button id="musicToggle" class="btn-music">Music: OFF</button>
            <input type="range" id="musicVolume" min="0" max="1" step="0.01" value="0.5">
          </div>
        </div>
        
        <!-- Game Log -->
        <div class="box">
          <h3>Game Log</h3>
          <div id="eventsList"></div>
        </div>
    </div>
    
    <!-- Right: Game area -->
    <div id="gameArea" style="display:flex; flex-direction:column; gap:8px;">
      <!-- Top UI -->
      <div id="topUi" class="top-ui">
        <div id="levelText">Level 1</div>
        <div id="livesText">Lives: 10</div>
        <button id="pauseButton" style="display: none;">Pause (P)</button>
        <div id="coinsText">Coins: 10</div>
        <button id="returnButton" class="return-btn bg-gold cl-black">Return to Main Menu</button>
      </div>

      <!-- Return popup -->
      <div id="returnPopup" class="return-popup">
        <div class="return-content">
          <h3>Leave the Battle?</h3>
          <p>Returning to the main menu will erase your current progress. Do you really want to go back?</p>
          <div class="return-buttons">
            <button id="confirmReturn" class="btn bg-gold cl-black">Yes, return</button>
            <button id="cancelReturn" class="btn">Cancel</button>
          </div>
        </div>
      </div>

      <!-- Progress bar -->
      <div id="progressContainer">
        <div id="progressBar"></div>
      </div>

      <!-- Canvas -->
      <canvas id="gameCanvas" width="1000" height="600"></canvas>

      <!-- Tower shop / Ability shop switcher -->
      <div id="buildModeSwitcher" class="build-mode-switcher">
        <button id="towerModeBtn" class="switch-btn active">üè∞ Towers</button>
        <button id="abilityModeBtn" class="switch-btn">üåãAbilities</button>
      </div>

      <div id="shopAndAbilitiesWrap" class="shopAndAbilitiesWrap">

        <div id="abilityToggle" class="d-none">
          <button id="showTowersBtn" class="ui-toggle">Towers</button>
          <button id="showAbilitiesBtn" class="ui-toggle">Abilities</button>
        </div>

          <!-- Tower shop -->
          <div id="shopWrapper" class="shop-wrapper">
            <div id="towerShop" class="shop"></div>
          </div>

          <!-- Ability shop -->
          <div id="abilityBar" class="ability-bar" style="display:none;">
          </div>

        </div>
      </div>

    </div>
  </div>

  <!-- Game overlay -->
  <div id="gameOverlay" class="overlay-full" style="display:none;">
    <div id="overlayContent">
      <p id="overlayMessage">PAUSED</p>
      <!-- <div id="overlayClose">(P)</div> -->
    </div>
  </div>

    <!-- Version History Popup -->
    <div id="versionPopup" class="overlay-full" style="display:none;">
      <div id="versionPopupContent">
        <h2 class="text-center text-center cl-primary">Version History</h2>
        <div id="versionList"></div>
        <button id="closeVersionPopup" class="btn">Close</button>
      </div>
    </div>

  <script type="module" src="js/game/main.js"></script>
  <script type="module" src="js/versions.js"></script>
  <script type="module" src="js/game/UI.js"></script>
</body>
</html>
